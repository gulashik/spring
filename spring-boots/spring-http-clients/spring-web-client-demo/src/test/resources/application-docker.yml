# application-docker.yml - Конфигурация для Docker
spring:
  application:
    name: webclient-demo-docker

  cache:
    type: redis
    redis:
      host: redis
      port: 6379
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 2

# Настройки для внешних API в Docker окружении
external-api:
  jsonplaceholder:
    base-url: https://jsonplaceholder.typicode.com
    timeout: 10000
    max-attempts: 3
    delay: 2000

  weather:
    base-url: https://api.openweathermap.org/data/2.5
    api-key: ${WEATHER_API_KEY:demo-key}
    timeout: 15000
    max-attempts: 2
    delay: 3000

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus,caches,httptrace
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true

logging:
  level:
    org.gualsh.demo.webclient: INFO
    org.springframework.web.reactive.function.client: WARN
  file:
    name: /app/logs/application.log
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
